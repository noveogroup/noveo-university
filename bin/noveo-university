#!/usr/bin/env node

var path = require('path');

var argv = require('yargs')
  .command('build', 'Build presentation')
  .command('watch', 'Watch changes, rebuild, and reload')
  .demand(1)
  .version(function() {
    return require('../package').version;
  })
  .argv;

var command = argv._[0];
console.dir(argv);
console.log('command:', command);

var cwd = process.cwd();
var magic = require('../');

var source = path.join(cwd, './slides');
var destination = path.join(cwd, './dist');

switch (command) {
  case 'build':
    magic.build(source, destination, false, function(err) {
      if (err) {
        console.error(err.message);
        return;
      }
      console.log('Presentation successfully created!');
    });
    break;
  case 'watch':
    magic.watch(source, destination, function(err, message) {
      if (err) {
        console.error(err.message);
        return;
      }
      console.log(message);
    });
    break;
}
